<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Ketrew_pure.Host.html">
<link rel="next" href="Ketrew_pure.Path.html">
<link rel="Up" href="Ketrew_pure.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of class methods" rel=Appendix href="index_methods.html">
<link title="Index of class types" rel=Appendix href="index_class_types.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Ketrew_pure" rel="Chapter" href="Ketrew_pure.html">
<link title="Ketrew" rel="Chapter" href="Ketrew.html"><title>Ketrew API : Ketrew_pure.Monitored_script</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Ketrew_pure.Host.html" title="Ketrew_pure.Host">Previous</a>
&nbsp;<a class="up" href="Ketrew_pure.html" title="Ketrew_pure">Up</a>
&nbsp;<a class="post" href="Ketrew_pure.Path.html" title="Ketrew_pure.Path">Next</a>
</div>
<h1>Module <a href="type_Ketrew_pure.Monitored_script.html">Ketrew_pure.Monitored_script</a></h1>

<pre><span class="keyword">module</span> Monitored_script: <code class="code"><span class="keyword">sig</span></code> <a href="Ketrew_pure.Monitored_script.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><hr width="100%">
<br>
Generate Shell scripts that “monitor” commands.<br>
<br>
Generate Shell scripts that “monitor” commands.<br>
<br>
The goal of this module is to create shell scripts from a high-level
    representation. The scripts are “monitored” in the sense that code is
    added to log every returned value or failure in a parsable <code class="code">log</code> file.<br>

<pre><code><span id="TYPEt"><span class="keyword">type</span> <code class="type"></code>t</span> = {</code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.playground">playground</span>&nbsp;: <code class="type">Path.t</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.program">program</span>&nbsp;: <code class="type">Program.t</code>;</code></td>

</tr></table>
}



<pre><span id="VALto_yojson"><span class="keyword">val</span> to_yojson</span> : <code class="type"><a href="Ketrew_pure.Monitored_script.html#TYPEt">t</a> -> Yojson.Safe.json</code></pre>
<pre><span id="VALof_yojson"><span class="keyword">val</span> of_yojson</span> : <code class="type">Yojson.Safe.json -><br>       [ `Error of string | `Ok of <a href="Ketrew_pure.Monitored_script.html#TYPEt">t</a> ]</code></pre><div class="info ">
The definition of a monitored script.<br>
</div>

<pre><span id="VALcreate"><span class="keyword">val</span> create</span> : <code class="type">playground:Path.t -> Program.t -> <a href="Ketrew_pure.Monitored_script.html#TYPEt">t</a></code></pre><div class="info ">
Create a new script, which will run the list of commands, and store state
    values in the <code class="code">playground</code> directory.<br>
</div>

<pre><span id="VALlog_file"><span class="keyword">val</span> log_file</span> : <code class="type"><a href="Ketrew_pure.Monitored_script.html#TYPEt">t</a> -> Path.t</code></pre><div class="info ">
Path to the log file of the script.<br>
</div>

<pre><span id="VALpid_file"><span class="keyword">val</span> pid_file</span> : <code class="type"><a href="Ketrew_pure.Monitored_script.html#TYPEt">t</a> -> Path.t</code></pre><div class="info ">
Path to the “PID” file: where the script stores the PID of the process
    running the script, <code class="code">- pid</code> will be the process id of the process group
    created by `setsid` (useful for killing the whole process tree).<br>
</div>

<pre><span id="VALto_string"><span class="keyword">val</span> to_string</span> : <code class="type">?write_pid:bool -> <a href="Ketrew_pure.Monitored_script.html#TYPEt">t</a> -> string</code></pre><div class="info ">
Render the <code class="code">monitored_script</code> to a shell-script string;
    if <code class="code">write_pid</code> is <code class="code"><span class="keyword">true</span></code> (the default), the script writes the pid to
    <code class="code">pid_file t</code>.<br>
</div>

<pre><span id="VALparse_log"><span class="keyword">val</span> parse_log</span> : <code class="type">string -><br>       [ `After of string * string * string<br>       | `Before of string * string * string<br>       | `Error of string list<br>       | `Failure of string * string * string<br>       | `Start of string<br>       | `Success of string ] list</code></pre><div class="info ">
Parse the log file of a <code class="code">monitored_script</code>.<br>
</div>
</body></html>