 <!DOCTYPE html> <html> <head><link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootswatch/3.2.0/readable/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="https://cdn.rawgit.com/hammerlab/ketrew/2d1c430cca52caa71e363a765ff8775a6ae14ba9/src/doc/code_style.css" type="text/css"><meta charset="utf-8"><title>Ketrew: Long-Running Plugins</title></head><body><div class="container"><h1>Ketrew: Long-Running Plugins</h1><div class="row">
<div class="col-md-3">
<h2>Contents</h2><ul><li><a href='#Implementation'>Implementation</a>
</li><li><a href='#Examples'>Examples</a>
</li><li><a href='#AlternativeToDynlink'>Alternative To Dyn-link</a>
</li></ul><h2>Menu</h2><ul><li><a href='index.html'>Home</a></li><li><a href='Alternative_CLI_Application.html'>Alternative CLI Application</a></li><li><a href='Developer_Documentation.html'>Developer Documentation</a></li><li><a href='Glossary.html'>Glossary</a></li><li><a href='Long-Running_Plugins.html'>Long-Running Plugins</a></li><li><a href='Server_Commands.html'>Server Commands</a></li><li><a href='Standalone_Mode.html'>Standalone Mode</a></li><li><a href='The_Configuration_File.html'>The Configuration File</a></li><li><a href='The_HTTP_API.html'>The HTTP API</a></li><li><a href='Workflow_Examples.html'>Workflow Examples</a></li><li><a href='dummy_plugin_user.html'>Plugin-Usage Example</a></li><li><a href='dummy_plugin.html'>Plugin Example</a></li><li><a href='./api/index.html'>API Documentation</a></li><li>Documentation for <a href='./doc.0.0.0/index.html'>version 0.0.0</a></li><li>Documentation for <a href='./doc.1.0.0/index.html'>version 1.0.0</a></li><li>Documentation for <a href='./doc.1.1.0/index.html'>version 1.1.0</a></li><li>Documentation for <a href='./doc.1.1.1/index.html'>version 1.1.1</a></li><li>Repository <a href='https://github.com/hammerlab/ketrew'>at Github</a></li><li>Up: <a href='../index.html'>Software Projects</a></li></ul></div><div class="col-md-9"><h1 id="LongRunningProcessPlugins">Long-Running Process Plugins</h1>

<h2 id="Implementation">Implementation</h2>

<p>The long-running plugins <em>must</em>:</p>
<ul><li>implement a module satisfying the <a href='api/Ketrew.Long_running.LONG_RUNNING.html' title='LONG_RUNNING'><code>LONG_RUNNING</code></a> interface;</li><li>provide a way to create values like
<code>`Long_running (name, serialized_state)</code>;</li><li>register themselves with the function:
<a href='api/Ketrew.Plugin.html#VALregister_long_running_plugin' title='Ketrew.Plugin.register_long_running_plugin'><code>Ketrew.Plugin.register_long_running_plugin</code></a>.</li></ul>

<h2 id="Examples">Examples</h2>

<p>There are (for now) four long-running methods in the library, see
<a href='api/Lsf.html'><a href='api/Ketrew.Lsf.html' title='Ketrew.Lsf'><code>Ketrew.Lsf</code></a></a>,
<a href='api/Yarn.html'><a href='api/Ketrew.Yarn.html' title='Ketrew.Yarn'><code>Ketrew.Yarn</code></a></a>,
<a href='api/Pbs.html'><a href='api/Ketrew.Pbs.html' title='Ketrew.Pbs'><code>Ketrew.Pbs</code></a></a>, and
<a href='api/Daemonize.html'><a href='api/Ketrew.Daemonize.html' title='Ketrew.Daemonize'><code>Ketrew.Daemonize</code></a></a>.
They all use the module <a href='api/Ketrew.Long_running_utilities.html' title='Ketrew.Long_running_utilities'><code>Ketrew.Long_running_utilities</code></a> which provides a few
helpers for plugin writers.</p>
<p>Moreover, the tests contain a “dynamically linked plugin” that uses the
implementation of <a href='api/Ketrew.Daemonize.html' title='Ketrew.Daemonize'><code>Ketrew.Daemonize</code></a> and adds a (stupid) custom runtime-query:</p>
<ul><li>Implementation of the plugin:
<a href='dummy_plugin.html'><code>src/test/dummy-plugin/dummy_plugin.ml</code></a>.</li><li>Workflow script that uses the plugin:
<a href='dummy_plugin_user.html'><code>src/test/dummy_plugin_user.ml</code></a>.</li></ul>

<h2 id="AlternativeToDynlink">Alternative To Dyn-link</h2>

<p>Dynamic linking can be annoying: for instance, some libraries do not install
<code>.cmxs</code> files, and some architectures do not support native dynlink, …</p>
<p>Luckily, there is an <strong>alternative</strong>, one can link plugins statically with
<code>src/app/main.ml</code> (or another
version of that), see the <a href='./Alternative_CLI_Application.html'>documentation</a>.</p>
</div></div></div></body><html>