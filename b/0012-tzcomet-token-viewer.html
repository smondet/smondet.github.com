<html>
<head>
    <meta charset="utf-8">
    <title>Protected Page</title>
    <!-- do not cache this page -->
    <meta http-equiv="cache-control" content="max-age=0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
    <meta http-equiv="pragma" content="no-cache"/>
    </style>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/openpgp/4.0.0/openpgp.min.js"
      integrity="sha512-LsI4YA/OY2EMDyHS4lWWUweqqcQXRi5RACGFsemrbqQAguNpNNhjRaJcua7Pvu+SZxGR1vbINmbRM1StWO9Z/Q=="
      crossorigin="anonymous"
    ></script>
</head>
<body>
<h2>PGP-Encrypted Page, please provide a passphrase.</h2>
<form id="staticrypt-form" action="#" method="post">
   <input id="staticrypt-password"
          type="password"
          name="password"
          placeholder="passphrase"
          autofocus/>
   <input id="staticrypt-form-submit"
          type="submit"
          value="DECRYPT"/>
</form>
<div id="errors"></div>
<code><pre id="armored-content">
-----BEGIN PGP MESSAGE-----

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
=x4NJ
-----END PGP MESSAGE-----
</pre></code>
<script>

function tryPassphrase(passphrase,silent) {
    console.log("tryPassphrase " + passphrase);
    var openpgp = window.openpgp;
    var options, encrypted;
    var encryptedMsg = document.getElementById('armored-content').innerHTML ;
    
    var armoredmsg = encryptedMsg.replace(/@/g, "\n");
    console.log("armoredmsg:\n" + armoredmsg);
    return openpgp.message.readArmored(armoredmsg).then(function (msg) {
        // console.log("msg " + JSON.stringify(msg));
        console.log("passphrase " + JSON.stringify(passphrase));
        options = {
            message: msg,
            passwords: [passphrase], // decrypt with password
            armor: true,
            format: 'utf8'
        };
        openpgp.decrypt(options).then(function(plaintext) {
            console.log("plaintext of msg " + JSON.stringify(plaintext));
            document.open("text/html", "replace");
            document.write(plaintext.data);
            var meta = document.createElement('meta');
            meta.name = "referrer";
            meta.content = "no-referrer";
            document.getElementsByTagName('head')[0].appendChild(meta);
            document.close();
            return true;
        }).catch(function (error) {
            if (silent) {
                console.log("error: " + error);
            } else {
                var errors = document.getElementById('errors');
                errors.innerHTML = '<b>ERROR: decryption failed: </b><code>'
                    + error
                    + '</code> <i>(usually means wrong password …)</i>';
            };
        });
    });
};
console.log("Setting on submit");
document.getElementById('staticrypt-form').addEventListener('submit', function(e) {
    e.preventDefault();
    console.log("on the submit");
    var passphrase = document.getElementById('staticrypt-password').value;
    console.log("on the submit passph: " + passphrase);
    tryPassphrase(passphrase, false);
});
window.onload = function() { 
    var firstAttempt = "";
    if (window.location.hash.charAt(0) == '#') {
        firstAttempt = window.location.hash.substring(1);
    } else {
        firstAttempt = window.location.hash
    };
    tryPassphrase(firstAttempt, true).then(function(ret) {
        if (ret) {
            console.log("on the else of firstAttempt");
        } else {
            console.log("Nope from the hash: " + firstAttempt);
        };
    }, function(error) {
        console.log("Error from tryPassphrase: " + error);
    });
};
</script>
</body>
</html>
