<html>
<head>
    <meta charset="utf-8">
    <title>Protected Page</title>
    <!-- do not cache this page -->
    <meta http-equiv="cache-control" content="max-age=0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
    <meta http-equiv="pragma" content="no-cache"/>
    </style>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/openpgp/4.0.0/openpgp.min.js"
      integrity="sha512-LsI4YA/OY2EMDyHS4lWWUweqqcQXRi5RACGFsemrbqQAguNpNNhjRaJcua7Pvu+SZxGR1vbINmbRM1StWO9Z/Q=="
      crossorigin="anonymous"
    ></script>
</head>
<body>
<h2>PGP-Encrypted Page, please provide a passphrase.</h2>
<form id="staticrypt-form" action="#" method="post">
   <input id="staticrypt-password"
          type="password"
          name="password"
          placeholder="passphrase"
          autofocus/>
   <input id="staticrypt-form-submit"
          type="submit"
          value="DECRYPT"/>
</form>
<div id="errors"></div>
<code><pre id="armored-content">
-----BEGIN PGP MESSAGE-----

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
=GrsU
-----END PGP MESSAGE-----
</pre></code>
<script>

function tryPassphrase(passphrase,silent) {
    console.log("tryPassphrase " + passphrase);
    var openpgp = window.openpgp;
    var options, encrypted;
    var encryptedMsg = document.getElementById('armored-content').innerHTML ;
    
    var armoredmsg = encryptedMsg.replace(/@/g, "\n");
    console.log("armoredmsg:\n" + armoredmsg);
    return openpgp.message.readArmored(armoredmsg).then(function (msg) {
        // console.log("msg " + JSON.stringify(msg));
        console.log("passphrase " + JSON.stringify(passphrase));
        options = {
            message: msg,
            passwords: [passphrase], // decrypt with password
            armor: true,
            format: 'utf8'
        };
        openpgp.decrypt(options).then(function(plaintext) {
            console.log("plaintext of msg " + JSON.stringify(plaintext));
            document.open("text/html", "replace");
            document.write(plaintext.data);
            var meta = document.createElement('meta');
            meta.name = "referrer";
            meta.content = "no-referrer";
            document.getElementsByTagName('head')[0].appendChild(meta);
            document.close();
            return true;
        }).catch(function (error) {
            if (silent) {
                console.log("error: " + error);
            } else {
                var errors = document.getElementById('errors');
                errors.innerHTML = '<b>ERROR: decryption failed: </b><code>'
                    + error
                    + '</code> <i>(usually means wrong password …)</i>';
            };
        });
    });
};
console.log("Setting on submit");
document.getElementById('staticrypt-form').addEventListener('submit', function(e) {
    e.preventDefault();
    console.log("on the submit");
    var passphrase = document.getElementById('staticrypt-password').value;
    console.log("on the submit passph: " + passphrase);
    tryPassphrase(passphrase, false);
});
window.onload = function() { 
    var firstAttempt = "";
    if (window.location.hash.charAt(0) == '#') {
        firstAttempt = window.location.hash.substring(1);
    } else {
        firstAttempt = window.location.hash
    };
    tryPassphrase(firstAttempt, true).then(function(ret) {
        if (ret) {
            console.log("on the else of firstAttempt");
        } else {
            console.log("Nope from the hash: " + firstAttempt);
        };
    }, function(error) {
        console.log("Error from tryPassphrase: " + error);
    });
};
</script>
</body>
</html>
