<html>
<head>
    <meta charset="utf-8">
    <title>Protected Page</title>
    <!-- do not cache this page -->
    <meta http-equiv="cache-control" content="max-age=0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
    <meta http-equiv="pragma" content="no-cache"/>
    </style>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/openpgp/4.0.0/openpgp.min.js"
      integrity="sha512-LsI4YA/OY2EMDyHS4lWWUweqqcQXRi5RACGFsemrbqQAguNpNNhjRaJcua7Pvu+SZxGR1vbINmbRM1StWO9Z/Q=="
      crossorigin="anonymous"
    ></script>
</head>
<body>
<h2>PGP-Encrypted Page, please provide a passphrase.</h2>
<form id="staticrypt-form" action="#" method="post">
   <input id="staticrypt-password"
          type="password"
          name="password"
          placeholder="passphrase"
          autofocus/>
   <input id="staticrypt-form-submit"
          type="submit"
          value="DECRYPT"/>
</form>
<div id="errors"></div>
<code><pre id="armored-content">
-----BEGIN PGP MESSAGE-----

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
=YO4f
-----END PGP MESSAGE-----
</pre></code>
<script>

function tryPassphrase(passphrase,silent) {
    console.log("tryPassphrase " + passphrase);
    var openpgp = window.openpgp;
    var options, encrypted;
    var encryptedMsg = document.getElementById('armored-content').innerHTML ;
    
    var armoredmsg = encryptedMsg.replace(/@/g, "\n");
    console.log("armoredmsg:\n" + armoredmsg);
    return openpgp.message.readArmored(armoredmsg).then(function (msg) {
        // console.log("msg " + JSON.stringify(msg));
        console.log("passphrase " + JSON.stringify(passphrase));
        options = {
            message: msg,
            passwords: [passphrase], // decrypt with password
            armor: true,
            format: 'utf8'
        };
        openpgp.decrypt(options).then(function(plaintext) {
            console.log("plaintext of msg " + JSON.stringify(plaintext));
            document.open("text/html", "replace");
            document.write(plaintext.data);
            var meta = document.createElement('meta');
            meta.name = "referrer";
            meta.content = "no-referrer";
            document.getElementsByTagName('head')[0].appendChild(meta);
            document.close();
            return true;
        }).catch(function (error) {
            if (silent) {
                console.log("error: " + error);
            } else {
                var errors = document.getElementById('errors');
                errors.innerHTML = '<b>ERROR: decryption failed: </b><code>'
                    + error
                    + '</code> <i>(usually means wrong password …)</i>';
            };
        });
    });
};
console.log("Setting on submit");
document.getElementById('staticrypt-form').addEventListener('submit', function(e) {
    e.preventDefault();
    console.log("on the submit");
    var passphrase = document.getElementById('staticrypt-password').value;
    console.log("on the submit passph: " + passphrase);
    tryPassphrase(passphrase, false);
});
window.onload = function() { 
    var firstAttempt = "";
    if (window.location.hash.charAt(0) == '#') {
        firstAttempt = window.location.hash.substring(1);
    } else {
        firstAttempt = window.location.hash
    };
    tryPassphrase(firstAttempt, true).then(function(ret) {
        if (ret) {
            console.log("on the else of firstAttempt");
        } else {
            console.log("Nope from the hash: " + firstAttempt);
        };
    }, function(error) {
        console.log("Error from tryPassphrase: " + error);
    });
};
</script>
</body>
</html>
