<html>
<head>
    <meta charset="utf-8">
    <title>Protected Page</title>
    <!-- do not cache this page -->
    <meta http-equiv="cache-control" content="max-age=0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
    <meta http-equiv="pragma" content="no-cache"/>
    </style>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/openpgp/4.0.0/openpgp.min.js"
      integrity="sha512-LsI4YA/OY2EMDyHS4lWWUweqqcQXRi5RACGFsemrbqQAguNpNNhjRaJcua7Pvu+SZxGR1vbINmbRM1StWO9Z/Q=="
      crossorigin="anonymous"
    ></script>
</head>
<body>
<h2>PGP-Encrypted Page, please provide a passphrase.</h2>
<form id="staticrypt-form" action="#" method="post">
   <input id="staticrypt-password"
          type="password"
          name="password"
          placeholder="passphrase"
          autofocus/>
   <input id="staticrypt-form-submit"
          type="submit"
          value="DECRYPT"/>
</form>
<div id="errors"></div>
<code><pre id="armored-content">
-----BEGIN PGP MESSAGE-----

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
TbCUiZ1Dj//frhH0YYN2NclpnoAX1wpbZgcENg==
=6sXE
-----END PGP MESSAGE-----
</pre></code>
<script>

function tryPassphrase(passphrase,silent) {
    console.log("tryPassphrase " + passphrase);
    var openpgp = window.openpgp;
    var options, encrypted;
    var encryptedMsg = document.getElementById('armored-content').innerHTML ;
    
    var armoredmsg = encryptedMsg.replace(/@/g, "\n");
    console.log("armoredmsg:\n" + armoredmsg);
    return openpgp.message.readArmored(armoredmsg).then(function (msg) {
        // console.log("msg " + JSON.stringify(msg));
        console.log("passphrase " + JSON.stringify(passphrase));
        options = {
            message: msg,
            passwords: [passphrase], // decrypt with password
            armor: true,
            format: 'utf8'
        };
        openpgp.decrypt(options).then(function(plaintext) {
            console.log("plaintext of msg " + JSON.stringify(plaintext));
            document.open("text/html", "replace");
            document.write(plaintext.data);
            var meta = document.createElement('meta');
            meta.name = "referrer";
            meta.content = "no-referrer";
            document.getElementsByTagName('head')[0].appendChild(meta);
            document.close();
            return true;
        }).catch(function (error) {
            if (silent) {
                console.log("error: " + error);
            } else {
                var errors = document.getElementById('errors');
                errors.innerHTML = '<b>ERROR: decryption failed: </b><code>'
                    + error
                    + '</code> <i>(usually means wrong password …)</i>';
            };
        });
    });
};
console.log("Setting on submit");
document.getElementById('staticrypt-form').addEventListener('submit', function(e) {
    e.preventDefault();
    console.log("on the submit");
    var passphrase = document.getElementById('staticrypt-password').value;
    console.log("on the submit passph: " + passphrase);
    tryPassphrase(passphrase, false);
});
window.onload = function() { 
    var firstAttempt = "";
    if (window.location.hash.charAt(0) == '#') {
        firstAttempt = window.location.hash.substring(1);
    } else {
        firstAttempt = window.location.hash
    };
    tryPassphrase(firstAttempt, true).then(function(ret) {
        if (ret) {
            console.log("on the else of firstAttempt");
        } else {
            console.log("Nope from the hash: " + firstAttempt);
        };
    }, function(error) {
        console.log("Error from tryPassphrase: " + error);
    });
};
</script>
</body>
</html>
