<html>
<head>
    <meta charset="utf-8">
    <title>Protected Page</title>
    <!-- do not cache this page -->
    <meta http-equiv="cache-control" content="max-age=0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
    <meta http-equiv="pragma" content="no-cache"/>
    </style>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/openpgp/4.0.0/openpgp.min.js"
      integrity="sha512-LsI4YA/OY2EMDyHS4lWWUweqqcQXRi5RACGFsemrbqQAguNpNNhjRaJcua7Pvu+SZxGR1vbINmbRM1StWO9Z/Q=="
      crossorigin="anonymous"
    ></script>
</head>
<body>
<h2>PGP-Encrypted Page, please provide a passphrase.</h2>
<form id="staticrypt-form" action="#" method="post">
   <input id="staticrypt-password"
          type="password"
          name="password"
          placeholder="passphrase"
          autofocus/>
   <input id="staticrypt-form-submit"
          type="submit"
          value="DECRYPT"/>
</form>
<div id="errors"></div>
<code><pre id="armored-content">
-----BEGIN PGP MESSAGE-----

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
wFUsn8+OcpPHggrVoNc9iqcffIJB7IyvjQ==
=eKmD
-----END PGP MESSAGE-----
</pre></code>
<script>

function tryPassphrase(passphrase,silent) {
    console.log("tryPassphrase " + passphrase);
    var openpgp = window.openpgp;
    var options, encrypted;
    var encryptedMsg = document.getElementById('armored-content').innerHTML ;
    
    var armoredmsg = encryptedMsg.replace(/@/g, "\n");
    console.log("armoredmsg:\n" + armoredmsg);
    return openpgp.message.readArmored(armoredmsg).then(function (msg) {
        // console.log("msg " + JSON.stringify(msg));
        console.log("passphrase " + JSON.stringify(passphrase));
        options = {
            message: msg,
            passwords: [passphrase], // decrypt with password
            armor: true,
            format: 'utf8'
        };
        openpgp.decrypt(options).then(function(plaintext) {
            console.log("plaintext of msg " + JSON.stringify(plaintext));
            document.open("text/html", "replace");
            document.write(plaintext.data);
            var meta = document.createElement('meta');
            meta.name = "referrer";
            meta.content = "no-referrer";
            document.getElementsByTagName('head')[0].appendChild(meta);
            document.close();
            return true;
        }).catch(function (error) {
            if (silent) {
                console.log("error: " + error);
            } else {
                var errors = document.getElementById('errors');
                errors.innerHTML = '<b>ERROR: decryption failed: </b><code>'
                    + error
                    + '</code> <i>(usually means wrong password …)</i>';
            };
        });
    });
};
console.log("Setting on submit");
document.getElementById('staticrypt-form').addEventListener('submit', function(e) {
    e.preventDefault();
    console.log("on the submit");
    var passphrase = document.getElementById('staticrypt-password').value;
    console.log("on the submit passph: " + passphrase);
    tryPassphrase(passphrase, false);
});
window.onload = function() { 
    var firstAttempt = "";
    if (window.location.hash.charAt(0) == '#') {
        firstAttempt = window.location.hash.substring(1);
    } else {
        firstAttempt = window.location.hash
    };
    tryPassphrase(firstAttempt, true).then(function(ret) {
        if (ret) {
            console.log("on the else of firstAttempt");
        } else {
            console.log("Nope from the hash: " + firstAttempt);
        };
    }, function(error) {
        console.log("Error from tryPassphrase: " + error);
    });
};
</script>
</body>
</html>
