<html>
<head>
    <meta charset="utf-8">
    <title>Protected Page</title>
    <!-- do not cache this page -->
    <meta http-equiv="cache-control" content="max-age=0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
    <meta http-equiv="pragma" content="no-cache"/>
    </style>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/openpgp/4.0.0/openpgp.min.js"
      integrity="sha512-LsI4YA/OY2EMDyHS4lWWUweqqcQXRi5RACGFsemrbqQAguNpNNhjRaJcua7Pvu+SZxGR1vbINmbRM1StWO9Z/Q=="
      crossorigin="anonymous"
    ></script>
</head>
<body>
<h2>PGP-Encrypted Page, please provide a passphrase.</h2>
<form id="staticrypt-form" action="#" method="post">
   <input id="staticrypt-password"
          type="password"
          name="password"
          placeholder="passphrase"
          autofocus/>
   <input id="staticrypt-form-submit"
          type="submit"
          value="DECRYPT"/>
</form>
<div id="errors"></div>
<code><pre id="armored-content">
-----BEGIN PGP MESSAGE-----

jA0ECQMCF7k9IXRkg43/0usBSh0webRU5Ssz/GfKtgoSvMbM+teKTReumsfd85mD
hNU4FQNTTM9xbbtlgTssAyF/Pyxh1IFFigg0He4ae68h7//y6yDbiFQnkzkpOufz
t1ITJATlMEJhlA3Un2ALLuWSESIsjQSKv4eMNqdxdbNcJvrM+6qGKpxmcVKIr7Mw
pOU3Vnm3UX3erB3Etmj5xWDF6nXtY4sYFaD+omk1xIXgqVulhQcyyjDJpuwfqCv5
sUJxyALp9wSZb8sbyMb9N2WATXwVL+SK+i+lPLMxcnoXv7WQ/5iMFVIDcHqT1W6R
TvSRSUpX/vz2tCzKIyGDeCNk5Qo+BK4TeTR+VGiVrT8SDAzlB5gf3nfyny7ifALp
uLc2EAYM5thq56Y28Mc7HUNfUyVch5gOPmShsmo0m0XhUfYTzSpzWxR9i/27uLxz
ImNAZcAVT8tM8thjepLTLv4lINaByiRLitFHdDoo184ihS+uOduEmd5Obi4il46z
+8oOopqQSQDOgO74iOH4W8qJ9JfKQsUddHthLWevac9h8g5lnK6kmMK7c7X8EtIT
PCAyQqll/BEXwSxQ25a3mErGNjxGRCcI/2+nivlJ5afOMeVB1nX2vAG6YnSD0VSN
sa9wuDkzgjnTauzQxQxf52ciikusCFzOwx7PMa03cLVTqwtVi9J7iwCCtokzkQ36
v58CBDWCMsgk2caRN5/wJPDpVKSR1ei1Jc5U46jreB8TkMRc770YJCYtGm3+UoUk
09RdGsAseHcl6aUd8mzR4T/Qxi/Rc6QlpYErgx0/dkI4UKhhf1NQOjmf1X/EeF62
n8l1kbTGGlv554inyFaPFKAifYvR+LUlXAQuCW6Z9Wj7qInp28rS+fix3Vs1aQv3
vno1MB7a7AgBWBVJf11yLGK1B8hcjhHDaRWt8lCeB6n4NffPAht93DOM7xud/hdo
o5JrxjsjKc9K6cZ63H18TyzeIuvlFVlfA3Ma0XPzyZk+NRUycLfcsFB6CGYBY75O
tvz42kwXpmyrjB4lXWKoXe3H8jeHx+ssq8Zi5UgkSkvlQfvDzUVhFaNCFF+MZp3P
s2So2IP1ge3ncPseFqKcflyaoe6XPUtSufWaA/3Zv4aF1RsqzRrFMmbwANk9pz0Q
LR8S34P+cwZNVBdQtOHj+7yqPSm1jBMWZDI4R2h8hkfiBG2Ywbd1Sm38Lllco2gm
ucJrboHiwPpevpOVQ0uu2emPdyKD60J1Ouk9MSBF2BQVm3H6HyzqSmdaxrWT4eyS
npf9MieQz/03lhahvdm7gj+JA7Jv9oRLixPWN9i+acb9AoWoEd3LpEcaB9baASC+
CBfEez34Ztq577ZewlSDlTc0jlNRhlpeIu3OeZHam+bkhXroNPg57NNdm6Gia+aY
53sE9I4RDzXmYJ3Sa0C/kv67cn5hyEu2MgDZaSxW9VV97cL7Nl27s3c8pjOaJxZX
bCGHuarLOGRUZ/XhKgM0Mf6NKDDiazfUERFAjXEUT/QMwg65RQpqIIHQfkmxxDuJ
9aFn/5yiuSBv9XFk8VtnPUiP1aKABluUn8S4AJ+8PccKhtSMSOyBpxSANzUt9wDb
Ne1T8ggWEY0DsFhgK/k/Bye4t2m9Xj3ZzooUKO8+7zCkiq35I1rjIP9hMzgFPqXA
TRPfZPfuNarSVMmJig3j9MeBUDbg38HUbuM9JyDru7xtcqa0DsocWY+qDEAIUDNt
Knh3SYLFe5gJa4B8t8RwK7VUxGZqSjgABSuEUIfb5isjiSrtEHubPJeqkvkuBAzd
2NEIvHyAa9QIuzTyZjIUQfL56W2fOLdGJESToEByw9X8zwq3ujZGgQmhkXegjSDp
J6QxMy+xTO1/zpLYKSEV1fYRejqbH+rypA5bzEOuX27FXbHOwPpggsGZRevNojnA
RG02Yyk3lhtmH08BFEj92iMz0bheATp6AN04fDwei6L5dntWQsbXyb8XmldVZsUT
MwurqJajNEb9oayuRFRyuPNnVONBx3uE89lxERrU8tNRAzP1BUCjtd2XHNoihdbD
3yv20y3Mn+tlONFoaVEufGhejPQnRmcZz37lisL8q8CbQ2QCFgggrOGkrVduoS5T
WzN+do84KVFiVvRJy0MC0DmkCSr/TztXNwqCw4YrtOoBMoYiAuNR1+QMrI0ZfA2p
eZ/x+zHtflxOKB3DawWHMvBxAti2w9JZ7KRbL8M7+BxvM9UGzX3PALvv3Y4o+V1v
pgzgwVTIBLsuMae0XWvf83yHUhTe+GDdfJ/bxpnbiwgRR74WdsMukz6xQmKQZet9
eKivWQcriAUsg7yTpy6U9Pdm6xWYTddNm2oByEcAq6TU4ae+JmCeblyZ8s+G9h0D
wjvyRahfr7qgNhB2hMnUFxL6qBDUkFAGobDTjBS+7e4a8SCCwwV2bjWHmaktGoDZ
p00titzVOBZhr/hiuA578vb/ON8DZWl5tJWVCLWeMOOJteSVzuiTb802vID+qKzx
Z329J33tMdRDFZgnTGqXbHjWWjFs6vz5VlwP8Pw/tbCwBI4epG9Ro2up0cXEPudm
5Hvs+d1F7xatFw8fPfEyVAIre0ifgP7DMOrbiiduYD+ur3z4dzJ04kyyDZl7bY/a
8VPs0nUjYBkh+b2C+EgSy0I/KaFLvo65CFrrSUnpqYF7u+MRCxkc6Iu809ccv+7p
nQ5fxlMjy8RtRDg/s73Cruf1IBrU7bJJ+aoyuBcqq1kpyzS3iWH7D2CJF2QxkgtL
FOq9nrKRWNLmpzeufmevsKAGvdE2XHyxZAFCYjKa8JxEa7HRab34zqiHp6qI4p01
TLKwr8LdApF6ouBi1FBh9nfB+Qu0yuQQAnNwwpvgeCuxIk/m1Jrqlecfs7e1Hckp
1bLyHaKdCEq5AGV/Jc7f+7XfMCeYG00gxvKkrv7n7/wdpRd1PGWV8h9XCMKJEpsJ
D+r00GFFwQKjEMi3bDuonLVRLEAW9oZ3BMnNcimtho6bfuUf8Okp+MjClPC1229h
VJJVSLXOil/phe4ypEaO6UHz0FlFqYJ8PJALHGAtHfUVhQ+OoJ6h6gHLFVVwG5pI
DF2p//1vzgqAHl+QU9MRgWV9z6C0bjhOBQ3maSli84Cey9pZwdfiCJefSIc368Q+
P0bJLWtEYX5wewu7chziKwGKPlnrL6htjTJy3n0l+Kb3LjxgaHKLkDYP0V/sO0Ka
/Ar/wyRo1xXIdGrDF7Dv8NKz4mrUMFy0RigQrvAjFnSoP3+yeyqo/4VGpkwea/8X
TNw1TBC4YzLiTQgFU4uq/rvK8cCBfbnWXERrYF84Ki2Dqqgf+8NHNNgXin0CRivA
9Mdxv2scPlqwqyCqoGi6F4HlTYpkTkkt+PPghXQjmedsiAAo2UKU/TsiXWZVIF5J
Nf23Hb4BwcqpBmRoKlcizhHYFqtgBgUk2X3PrpaBEBhLgVPObaa+1d6gVvt+Xv87
oHZg6Q0xQGR4Bu8FKQqzFg1URSZsEWG/3oBWyDN4ExqLuRsRVth7wUCBf/aWd+DI
tpKqzOeWTlq7i/31xHJbmPvQUywqyoa+vnDXwnCpw+5gdGGwzQc7z85UQkZx9hg5
ey2LXKgG99OOuElY5W0GEJhpf8pW0C8ONmqJ6VcHqSVTku1EhdMrpvy3g7urYwZ4
eRKwS3Vv3LYt4BYg/pUpFQMCbxmn7HFnnq7kybe13KnAhUbHy5+mCPaJ9ujOYb4w
27edUDDlqIgt4JCBRyaRipgIUx5iVrdKtJ0/gTNt1cFOiPTkbzS9F/L/sCZz+Uxg
1l+25y0+hR1zBbRe0RMb6tew6ShOUnlxq3KdPiCTgLXeW+P2LSb7/BoBMFQsj0fn
gVBqpJKY/hFuZ7DXwNWLTo8W5kcxeZKciJET+EWKePKccpEWykz2ygn5bf1QMAdQ
Z4ZSoi4kbmaIH1FSeklYbCWMh1h8V3S2176lJKm4ka1KVBfH5bqRnRjXDwX6JTIb
LqNe7+XS+KG7aEbuYoUcuAibZVekb4p4f20emFjLcqY+xDgq28zvUT65DmBdwlbk
ACIXJC4Gyo0UttEN5vhqpziNAkyvPGh5mTkYq27N7S9ps7BNwAxHfos4VEub6whS
MOn/h77zt9hlokLoR/wjEbmewDqXhhmELXB2ygwgK18y2NtAOMuTyabCrJla2SA1
Yg1MoXa6y+KkqHOUcCUvwL39tIw0F45FtIM0vRTXblytVCeKCvd9GIY5F2xFbmJ8
RTykYj9nlIFjMVAIfj209BB9WMMK8smiuiIb/V2QIiz2wq1e6cY7SS4wJIu2aYzO
EtdQ/z58iiqObYJYoFWMCylq9UJczuQih4Odskv3b2IIFmbvkA97Ac4IF3v2vxIx
q7fvdmT4lDBUU7W8cK+gr4jpvNJ6j6/Iw4QgBYVfQpbF0B16ioUyKbKc5SUDWSh0
FL2LVczOIdUZC8j4SpwUSQh6kwvrOagwCabnsKUR
=1DHR
-----END PGP MESSAGE-----
</pre></code>
<script>

function tryPassphrase(passphrase,silent) {
    console.log("tryPassphrase " + passphrase);
    var openpgp = window.openpgp;
    var options, encrypted;
    var encryptedMsg = document.getElementById('armored-content').innerHTML ;
    
    var armoredmsg = encryptedMsg.replace(/@/g, "\n");
    console.log("armoredmsg:\n" + armoredmsg);
    return openpgp.message.readArmored(armoredmsg).then(function (msg) {
        // console.log("msg " + JSON.stringify(msg));
        console.log("passphrase " + JSON.stringify(passphrase));
        options = {
            message: msg,
            passwords: [passphrase], // decrypt with password
            armor: true,
            format: 'utf8'
        };
        openpgp.decrypt(options).then(function(plaintext) {
            console.log("plaintext of msg " + JSON.stringify(plaintext));
            document.open("text/html", "replace");
            document.write(plaintext.data);
            var meta = document.createElement('meta');
            meta.name = "referrer";
            meta.content = "no-referrer";
            document.getElementsByTagName('head')[0].appendChild(meta);
            document.close();
            return true;
        }).catch(function (error) {
            if (silent) {
                console.log("error: " + error);
            } else {
                var errors = document.getElementById('errors');
                errors.innerHTML = '<b>ERROR: decryption failed: </b><code>'
                    + error
                    + '</code> <i>(usually means wrong password …)</i>';
            };
        });
    });
};
console.log("Setting on submit");
document.getElementById('staticrypt-form').addEventListener('submit', function(e) {
    e.preventDefault();
    console.log("on the submit");
    var passphrase = document.getElementById('staticrypt-password').value;
    console.log("on the submit passph: " + passphrase);
    tryPassphrase(passphrase, false);
});
window.onload = function() { 
    var firstAttempt = "";
    if (window.location.hash.charAt(0) == '#') {
        firstAttempt = window.location.hash.substring(1);
    } else {
        firstAttempt = window.location.hash
    };
    tryPassphrase(firstAttempt, true).then(function(ret) {
        if (ret) {
            console.log("on the else of firstAttempt");
        } else {
            console.log("Nope from the hash: " + firstAttempt);
        };
    }, function(error) {
        console.log("Error from tryPassphrase: " + error);
    });
};
</script>
</body>
</html>
